// Core VoIP Settings
set cl_voip 1                           // Enable VoIP (0=disabled, 1=enabled)
set cl_voipProtocol "opus"              // VoIP codec protocol (opus - RFC 6716)
set cl_voipSend 0                       // VoIP transmission state (0=idle, 1=transmitting) [read-only]
set cl_voipSendTarget "spatial"         // Target mode: spatial/crosshair/team/all
set cl_voipLoopback 0                   // Loopback test mode (0=off, 1=on)
set cl_voipEcho 0                       // Echo suppression (deprecated, always 0)
set cl_voipShowMeter 0                  // Show VoIP meter UI (0=off, 1=on)
set cl_voipTeamOnly 0                   // Restrict transmission to team only (0=no, 1=yes)

// Opus Encoder Settings (RFC 6716)
set voip_bitrate 32000                  // Opus bitrate in bps (8000-48000)
                                        // 8000-16000=narrowband, 24000=wideband, 32000=balanced, 48000=fullband

// Jitter Buffer (RFC 6716 Compliance)
set cl_voipJitterMs 180                 // Jitter buffer size in milliseconds (60-500)

// SDL Audio Capture Configuration
set s_sdlCapture 1                      // Enable SDL audio capture (0=disabled, 1=enabled)
set s_sdlCaptureDevice ""               // Capture device name (empty = system default)
set s_sdlCaptureFreq 48000              // Capture sample rate (MUST be 48000 for Opus)
set s_sdlCaptureChannels 1              // Capture channels (1=mono, 2=stereo)
set s_sdlCaptureSamples 0               // Capture buffer samples (0=auto: 120ms)
set s_sdlAvailableCaptureDevices ""     // List of available devices [read-only]

// OpenAL Audio Capture (Alternative - if SDL disabled)
set s_alCapture 1                       // Enable OpenAL audio capture (0=disabled, 1=enabled)
set s_alInputDevice ""                  // OpenAL input device name (empty = default)
set s_alCaptureSampleRate 48000         // OpenAL capture sample rate (48000 recommended)
set s_alCaptureBits 16                  // OpenAL capture bit depth (16 recommended)
set s_alCaptureChannels 1               // OpenAL capture channels (1=mono)
set s_alCaptureBufferSize 0             // OpenAL capture buffer size (0=auto)
set s_alCaptureMult 2.0                 // OpenAL capture gain multiplier (0.5-4.0)
set s_alAvailableInputDevices ""        // List of OpenAL input devices [read-only]

// Audio Playback Settings
set s_volume 0.8                        // Master game volume (0.0-1.0)
set s_volumeVoice 1.0                   // VoIP playback volume (0.0-2.0)
set cl_voipGainDuringCapture 0.2        // Duck game audio during transmission (0.0-1.0)
set cl_voipCapturing 0                  // Capture state indicator [read-only]

// Voice Activity Detection (VAD)
set cl_voipUseVAD 1                     // Enable VAD (0=push-to-talk only, 1=auto-detect)
set cl_voipVADThreshold 0.15            // VAD sensitivity threshold (0.01-0.5, lower=more sensitive)

// Noise Gate (Silence Suppression)
set cl_voipNoiseGate 1                  // Enable noise gate (0=off, 1=on)
set cl_voipNoiseThreshold 0.02          // Noise gate threshold (0.01-0.1, lower=more sensitive)

// Automatic Gain Control (AGC)
set cl_voipAGC 1                        // Enable AGC normalization (0=off, 1=on)
set cl_voipAGCTarget 0.7                // AGC target level (0.3-0.9)
set cl_voipAGCAttack 0.1                // AGC attack time in seconds (0.01-1.0)
set cl_voipAGCRelease 0.01              // AGC release time in seconds (0.001-0.1)

// VoIP State Masks [read-only - managed by engine]
set cl_voipSpeakingMask 0               // Bitmask of clients currently speaking [read-only]
set cl_voipMuteMask 0                   // Bitmask of clients you have muted [read-only]

// Keybindings
bind b "+voiprecord"                    // Push-to-talk key (hold to transmit)
bind n "vstr next_target"               // Cycle VoIP target modes

// VoIP Commands
// voip mute <clientNum>                // Mute specific player
// voip unmute <clientNum>              // Unmute specific player
// voip muteall                         // Toggle mute all players
// voip gain <clientNum> <0.0-10.0>     // Set gain for specific player
// voip list                            // Show VoIP status and muted players

// Target Mode Cycling Aliases
alias target_spatial "set cl_voipSendTarget spatial; set next_target vstr target_crosshair; echo ^2VoIP Target: ^7Spatial (proximity-based)"
alias target_crosshair "set cl_voipSendTarget crosshair; set next_target vstr target_team; echo ^2VoIP Target: ^7Crosshair (player in view)"
alias target_team "set cl_voipSendTarget team; set next_target vstr target_all; echo ^2VoIP Target: ^7Team only"
alias target_all "set cl_voipSendTarget all; set next_target vstr target_spatial; echo ^2VoIP Target: ^7All players"
set next_target "vstr target_crosshair"

// Advanced Notes:
// - Frame duration: 60ms (2880 samples @ 48kHz)
// - FEC: Enabled (Forward Error Correction for packet loss recovery)
// - Packet loss concealment: Automatic
// - Network flush interval: 60ms (time-based piggybacking on game packets)

// CRITICAL: Audio Sample Rate (MUST be 48 for VoIP)
set s_khz 48                            // OpenAL sample rate (48=48kHz, required for Opus VoIP)

// MCP/RCON Server Integration
set rconPassword "secret"               // RCON password for MCP server (CHANGE THIS!)
set g_logsync 1                         // Enable log syncing for MCP log monitoring
set logfile 1                           // Enable logging for MCP log monitoring

